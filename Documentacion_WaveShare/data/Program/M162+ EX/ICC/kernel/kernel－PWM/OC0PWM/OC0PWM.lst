Interrupt Vectors
    00000 940C 0038 JMP	__start|__text_start

Program Code (text area)
__start|__text_start:
    00038 EFCF      LDI	R28,0xFF
    00039 E0D4      LDI	R29,4
    0003A BFCD      OUT	0x3D,R28
    0003B BFDE      OUT	0x3E,R29
    0003C 51C0      SUBI	R28,0x10
    0003D 40D0      SBCI	R29,0
    0003E EA0A      LDI	R16,0xAA
    0003F 8308      ST	Y,R16
    00040 2400      CLR	R0
    00041 E0E0      LDI	R30,0
    00042 E0F1      LDI	R31,1
    00043 E011      LDI	R17,1
    00044 30E0      CPI	R30,0
    00045 07F1      CPC	R31,R17
    00046 F011      BEQ	0x0049
    00047 9201      ST	Z+,R0
    00048 CFFB      RJMP	0x0044
    00049 8300      ST	Z,R16
    0004A E7E0      LDI	R30,0x70
    0004B E0F0      LDI	R31,0
    0004C E0A0      LDI	R26,0
    0004D E0B1      LDI	R27,1
    0004E E010      LDI	R17,0
    0004F E000      LDI	R16,0
    00050 BF0B      OUT	0x3B,R16
    00051 37E0      CPI	R30,0x70
    00052 07F1      CPC	R31,R17
    00053 F021      BEQ	0x0058
    00054 95C8      LPM
    00055 9631      ADIW	R30,1
    00056 920D      ST	X+,R0
    00057 CFF9      RJMP	0x0051
    00058 940E 0062 CALL	_main
_exit:
    0005A CFFF      RJMP	_exit
FILE: D:\DVK501_ICC\KERNEL~1\ATmega162\内核－PWM\OC0PWM\OC0PWM.C
(0001) /*********************************************************************
(0002) 	微 雪 电 子   WaveShare   http://www.waveShare.net            	
(0003) 		                                                        
(0004) 目    的:   建立使用OC0做PWM的示例程序
(0005) 	
(0006) 目标系统:   基于AVR单片机
(0007) 		                                                                
(0008) 应用软件:   ICCAVR
(0009) 		                                                                
(0010) 版    本:   Version 1.0                                                          
(0011) 		                                                                
(0012) 圆版时间:   2005-06-25
(0013) 	
(0014) 开发人员:   SEE
(0015) 
(0016) 说    明:   若用于商业用途，请保留此段文字或注明代码来源
(0017) 	
(0018) 	深 圳 市 微 雪 电 子 有 限 公 司 保 留 所 有 的 版 权     
(0019) *********************************************************************/
(0020) 
(0021) /*01010101010101010101010101010101010101010101010101010101010101010101
(0022) ---------------------------------------------------------------------
(0023) 版本更新记录：
(0024) 
(0025) ----------------------------------------------------------------------
(0026) 实验内容：
(0027) 使用UserLed作为PWM口的监控，如果PWM低速则可以观察到UserLed的闪烁。
(0028) ----------------------------------------------------------------------
(0029) 硬件连接：	
(0030) 将UserLed指示灯连接至PB3/OC0。
(0031) ----------------------------------------------------------------------
(0032) 注意事项： 
(0033) （1）若有加载库函数，请将光盘根目录下的“库函数”下的“ICC_H”文件夹拷到D盘
(0034) （2）请详细阅读“使用必读”及相关资料。
(0035) 		
(0036) ----------------------------------------------------------------------
(0037) 10101010101010101010101010101010101010101010101010101010101010101010*/
(0038) #define NO_INCLUDE_I2C_H 1
(0039) #include <iom162v.h> 
(0040) #include <macros.h> 
(0041) 
(0042) #define OC0_OUT_EN	DDRB |= 0b00001000
(0043) 
(0044) /*--------------------------------------------------------------------
(0045) 函数名称：
(0046) 函数功能：
(0047) 注意事项：
(0048) 提示说明：
(0049) 输    入：
(0050) 返    回：
(0051) --------------------------------------------------------------------*/
(0052) void timer0_init(void) 
(0053) { 
(0054) 	TCCR0 = (1<<WGM01)|(1<<WGM00)|(1<<COM01)|(1<<COM00)|(1<<CS00);	
_timer0_init:
    0005B E789      LDI	R24,0x79
    0005C BF83      OUT	0x33,R24
(0055) /*
(0056) 	WGM01=1; WGM00=1; --> fast PWM modle
(0057) 	COM01=1; COM00=0; --> 比较匹配时set OC0 pin
(0058) 	CS00=1;  --> timer0 source 不经过任何分频，直接为Clk，使得PWM可以工作得足够快
(0059) */
(0060) 	TCNT0 = 0x00;			//设置TC0计数寄存器初值 
    0005D 2422      CLR	R2
    0005E BE22      OUT	0x32,R2
(0061) 	OCR0  = 0x10;			//输出比较寄存器初值，设置该值可用于调节占空比
    0005F E180      LDI	R24,0x10
    00060 BF81      OUT	0x31,R24
    00061 9508      RET
(0062) } 
(0063) /*--------------------------------------------------------------------
(0064) 函数名称：
(0065) 函数功能：
(0066) 注意事项：
(0067) 提示说明：
(0068) 输    入：
(0069) 返    回：
(0070) --------------------------------------------------------------------*/
(0071) void main(void) 
(0072) {
(0073) 	OC0_OUT_EN;				//为允许PWM工作，需设置PB3为输出
_main:
    00062 9ABB      SBI	0x17,3
(0074) 	timer0_init(); 
    00063 DFF7      RCALL	_timer0_init
(0075) 	SEI(); 
    00064 9478      BSET	7
(0076) 	while(1);
FILE: <library>
    00065 CFFF      RJMP	0x0065
    00066 9508      RET
