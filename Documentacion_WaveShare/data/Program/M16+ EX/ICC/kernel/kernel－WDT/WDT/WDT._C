/*********************************************************************
	微 雪 电 子   WaveShare   http://www.waveShare.net            	
		                                                        
目    的:   建立使用WDT的示例程序
	
目标系统:   基于AVR单片机
		                                                                
应用软件:   ICCAVR
		                                                                
版    本:   Version 1.0                                                          
		                                                                
圆版时间:   2005-06-25
	
开发人员:   SEE

说    明:   若用于商业用途，请保留此段文字或注明代码来源
	
	深 圳 市 微 雪 电 子 有 限 公 司 保 留 所 有 的 版 权     
*********************************************************************/

/*01010101010101010101010101010101010101010101010101010101010101010101
----------------------------------------------------------------------
版本更新记录：

----------------------------------------------------------------------
实验内容：
观察喂狗与不喂狗的区别，使用PB口的LED指示灯做状态指示。
----------------------------------------------------------------------
硬件连接：	
将PB口的LED指示灯使能开关切换到"ON"状态。
----------------------------------------------------------------------
注意事项： 
（2）请详细阅读：光盘根目录下的“产品资料\开发板实验板\SMK系列\SMK1632\说明资料”
----------------------------------------------------------------------
10101010101010101010101010101010101010101010101010101010101010101010*/

#include <iom16v.h>
#include "D:\ICC_H\CmmICC.H"

#define DISP_DDR	DDRB
#define DISP_PORT	PORTB

/*--------------------------------------------------------------------
函数名称：
函数功能：
注意事项：
提示说明：
输    入：
返    回：
--------------------------------------------------------------------*/
void wdt_init(void)
{
	asm("wdr");			//clr wdt
	WDTCR=0x0F;			//enable wdt,clk = 2048，2.1S
} 
/*--------------------------------------------------------------------
函数名称：
函数功能：
注意事项：
提示说明：
输    入：
返    回：
--------------------------------------------------------------------*/
void main(void) 
{
	uint8 i;
	
	DISP_DDR = 0XFF;
	wdt_init();

	while(1)
	{
		DISP_PORT++;
		//asm("wdr");	   //喂狗，去除此句将导致MCU复位，从而数据不会向上加
		delay50ms(20);	
	} 			
}