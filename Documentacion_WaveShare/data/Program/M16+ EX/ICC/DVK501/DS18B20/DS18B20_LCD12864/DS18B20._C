/*********************************************************************
	微 雪 电 子   WaveShare   http://www.waveShare.net            	
		                                                            
项目名称:   DS18B20示例程序
		
目标系统:   “DVK501” && “M48+ EX”

应用软件:   ICCAVR 6.31A                                             
		                                                                
版    本:   V1.0 
                                                        
圆版时间:   2009-7-1

开发人员:   zz

说    明:   若用于商业用途，请保留此段文字或注明代码来源
		
	深 圳 市 微 雪 电 子 有 限 公 司 保 留 所 有 的 版 权     
*********************************************************************/

/*01010101010101010101010101010101010101010101010101010101010101010101
----------------------------------------------------------------------
版本更新记录：

----------------------------------------------------------------------
实验内容：
通过LCD12864观察由DS18B20转换而来的温度
----------------------------------------------------------------------
硬件连接： 
		 	  DVK501				ATmega48
			DQ(onewire)	---------	  PB1
			CS(LCD)	    ---------	  VCC
			PSB			---------	  GND
			SID			---------	  PB3
			SCK			---------	  PB5
----------------------------------------------------------------------
注意事项：
（1）若有加载库函数，请将光盘根目录下的“库函数”下的“ICC_H”文件夹拷到D盘
（2）请详细阅读“使用必读”及相关资料。
----------------------------------------------------------------------
10101010101010101010101010101010101010101010101010101010101010101010*/
#include <iom48v.h>
#include <macros.h>
#include "D:\ICC_H\CmmICC.H"
#define DDRx DDRB
#define PORTx PORTB
#define PINx PINB
#define ds18b20_dq 1
#include "D:\ICC_H\DS18B20_DVK501.H"
#include "D:\ICC_H\LCD12864_ST7920_M48.H"
//----端口初始化----

void main(void)
{	
	uchar tmp=0;	
	lcd_init();
	lcd_clr();
	lcd_puts(1,1,"DS18B20-LCD12864");
	lcd_puts(2,1,"液晶显示温度");
	lcd_puts(3,1,"温度:   ℃");
	
	while(1)
	{
		delay50ms(20);
		tmp=read_temperature();
		lcd_putd(3,4,tmp,1);	//把转换出来温度通过lcd显示
	}
}