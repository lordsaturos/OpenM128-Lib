/*********************************************************************
    微 雪 电 子   WaveShare   http://www.waveShare.net            	
                                                                    
目    的:   测试"SingleKeyBoard"模块

目标系统:   基于任何AVR单片机
                                                                        
应用软件:   ICCAVR
                                                                        
版    本:   Version 1.0                                                          
                                                                        
圆版时间:   2005-06-25
    
开发人员:   SEE

说    明:   若用于商业用途，请保留此段文字或注明代码来源
    
    深 圳 市 微 雪 电 子 有 限 公 司 保 留 所 有 的 版 权     
*********************************************************************/

/*01010101010101010101010101010101010101010101010101010101010101010101
----------------------------------------------------------------------
版本更新记录：

----------------------------------------------------------------------
实验内容：
循环扫描PA口接入的按键，并使用PB口的LED指示灯指示按键的码值。
----------------------------------------------------------------------
硬件连接：
将PB口的LED指示灯使能开关切换到"ON"状态，使其指示按键的码值。
SingleKeyBoard：K0----K7
                 |    |
SMK1632：       PA0--PA7
----------------------------------------------------------------------
注意事项： 
（1）若有加载库函数，请将光盘根目录下的“库函数”下的“ICC_H”文件夹拷到D盘
（2）请详细阅读“使用必读”及相关资料。
----------------------------------------------------------------------
10101010101010101010101010101010101010101010101010101010101010101010*/

#include <iom16v.h>
#include "D:\ICC_H\CmmICC.H"

#define LED_DDR  DDRB
#define LED_P0RT PORTB
#define KEY_DDR  DDRA
#define KEY_PORT PORTA
#define KEY_PIN  PINA

/*--------------------------------------------------------------------
函数名称：键盘扫描
函数功能：
注意事项：
提示说明：
输    入：
返    回：
--------------------------------------------------------------------*/
void scanKey()
{
    KEY_DDR=0X00;
    KEY_PORT=0xFF;
    if(KEY_PIN==0xFE) 
        LED_P0RT=0x01;
    if(KEY_PIN==0xFD) 
        LED_P0RT=0x02;
    if(KEY_PIN==0xFB) 
        LED_P0RT=0x04;
    if(KEY_PIN==0xF7) 
        LED_P0RT=0x08;
    if(KEY_PIN==0xEF) 
        LED_P0RT=0x10;
    if(KEY_PIN==0xDF) 
        LED_P0RT=0x20;
    if(KEY_PIN==0xBF) 
        LED_P0RT=0x40;
    if(KEY_PIN==0x7F) 
        LED_P0RT=0x80;
 }
/*--------------------------------------------------------------------
函数名称：
函数功能：
注意事项：
提示说明：
输    入：
返    回：
--------------------------------------------------------------------*/
void main()
{
    LED_DDR=0XFF;
    while(1)
        scanKey();
}
