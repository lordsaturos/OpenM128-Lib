Interrupt Vectors
    00000 940C 0046 JMP	__start|__text_start

Program Code (text area)
__start|__text_start:
    00046 EFCF      LDI	R28,0xFF
    00047 E1D0      LDI	R29,0x10
    00048 BFCD      OUT	0x3D,R28
    00049 BFDE      OUT	0x3E,R29
    0004A 51C0      SUBI	R28,0x10
    0004B 40D0      SBCI	R29,0
    0004C EA0A      LDI	R16,0xAA
    0004D 8308      ST	Y,R16
    0004E 2400      CLR	R0
    0004F E0E0      LDI	R30,0
    00050 E0F1      LDI	R31,1
    00051 E011      LDI	R17,1
    00052 30E0      CPI	R30,0
    00053 07F1      CPC	R31,R17
    00054 F011      BEQ	0x0057
    00055 9201      ST	Z+,R0
    00056 CFFB      RJMP	0x0052
    00057 8300      ST	Z,R16
    00058 E8EC      LDI	R30,0x8C
    00059 E0F0      LDI	R31,0
    0005A E0A0      LDI	R26,0
    0005B E0B1      LDI	R27,1
    0005C E010      LDI	R17,0
    0005D E000      LDI	R16,0
    0005E BF0B      OUT	0x3B,R16
    0005F 38EC      CPI	R30,0x8C
    00060 07F1      CPC	R31,R17
    00061 F021      BEQ	0x0066
    00062 95C8      LPM
    00063 9631      ADIW	R30,1
    00064 920D      ST	X+,R0
    00065 CFF9      RJMP	0x005F
    00066 940E 0070 CALL	_main
_exit:
    00068 CFFF      RJMP	_exit
FILE: D:\DVK501_ICC\KERNEL~1\ATmega128\内核－PWM\OC0PWM\OC0PWM.C
(0001) /*********************************************************************
(0002) 	微 雪 电 子   WaveShare   http://www.waveShare.net            	
(0003) 		                                                        
(0004) 目    的:   建立使用OC0做PWM的示例程序
(0005) 	
(0006) 目标系统:   基于AVR单片机
(0007) 		                                                                
(0008) 应用软件:   ICCAVR
(0009) 		                                                                
(0010) 版    本:   Version 1.0                                                          
(0011) 		                                                                
(0012) 圆版时间:   2005-06-25
(0013) 	
(0014) 开发人员:   SEE
(0015) 
(0016) 说    明:   若用于商业用途，请保留此段文字或注明代码来源
(0017) 	
(0018) 	深 圳 市 微 雪 电 子 有 限 公 司 保 留 所 有 的 版 权     
(0019) *********************************************************************/
(0020) 
(0021) /*01010101010101010101010101010101010101010101010101010101010101010101
(0022) ---------------------------------------------------------------------
(0023) 版本更新记录：
(0024) 
(0025) ----------------------------------------------------------------------
(0026) 实验内容：
(0027) 使用UserLed作为PWM口的监控，如果PWM低速则可以观察到UserLed的闪烁。
(0028) ----------------------------------------------------------------------
(0029) 硬件连接：	
(0030) 将UserLed指示灯连接至PB3/OC0。
(0031) ----------------------------------------------------------------------
(0032) 注意事项： 
(0033) （1）若有加载库函数，请将光盘根目录下的“库函数”下的“ICC_H”文件夹拷到D盘
(0034) （2）请详细阅读“使用必读”及相关资料。
(0035) 		
(0036) ----------------------------------------------------------------------
(0037) 10101010101010101010101010101010101010101010101010101010101010101010*/
(0038) 
(0039) #include <iom128v.h> 
(0040) #include <macros.h> 
(0041) 
(0042) #define OC0_OUT_EN	DDRB |= 0b00001000
(0043) 
(0044) /*--------------------------------------------------------------------
(0045) 函数名称：
(0046) 函数功能：
(0047) 注意事项：
(0048) 提示说明：
(0049) 输    入：
(0050) 返    回：
(0051) --------------------------------------------------------------------*/
(0052) void timer0_init(void) 
(0053) { 
(0054) 	TCCR0 = (1<<WGM01)|(1<<WGM00)|(1<<COM01)|(1<<COM00)|(1<<CS00);	
_timer0_init:
    00069 E789      LDI	R24,0x79
    0006A BF83      OUT	0x33,R24
(0055) /*
(0056) 	WGM01=1; WGM00=1; --> fast PWM modle
(0057) 	COM01=1; COM00=0; --> 比较匹配时set OC0 pin
(0058) 	CS00=1;  --> timer0 source 不经过任何分频，直接为Clk，使得PWM可以工作得足够快
(0059) */
(0060) 	TCNT0 = 0x00;			//设置TC0计数寄存器初值 
    0006B 2422      CLR	R2
    0006C BE22      OUT	0x32,R2
(0061) 	OCR0  = 0x10;			//输出比较寄存器初值，设置该值可用于调节占空比
    0006D E180      LDI	R24,0x10
    0006E BF81      OUT	0x31,R24
    0006F 9508      RET
(0062) } 
(0063) /*--------------------------------------------------------------------
(0064) 函数名称：
(0065) 函数功能：
(0066) 注意事项：
(0067) 提示说明：
(0068) 输    入：
(0069) 返    回：
(0070) --------------------------------------------------------------------*/
(0071) void main(void) 
(0072) {
(0073) 	OC0_OUT_EN;				//为允许PWM工作，需设置PB3为输出
_main:
    00070 9ABB      SBI	0x17,3
(0074) 	timer0_init(); 
    00071 DFF7      RCALL	_timer0_init
(0075) 	SEI(); 
    00072 9478      BSET	7
(0076) 	while(1);
FILE: <library>
    00073 CFFF      RJMP	0x0073
    00074 9508      RET
