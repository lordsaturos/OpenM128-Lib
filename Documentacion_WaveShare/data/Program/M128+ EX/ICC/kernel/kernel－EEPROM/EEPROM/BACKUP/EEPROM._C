/*********************************************************************
	微 雪 电 子   WaveShare   http://www.waveShare.net	

功能目的:   建立EEPROM操作示例程序

目标系统:   基于AVR单片机

应用软件:   ICCAVR                                               

版    本:   Version 1.0

圆版时间:   2005-03-01

开发人员:   SEE

说    明:   若用于商业用途，请保留此段文字或注明代码来源

	深 圳 市 微 雪 电 子 有 限 公 司 保 留 所 有 的 版 权
*********************************************************************/

/*01010101010101010101010101010101010101010101010101010101010101010101
---------------------------------------------------------------------
版本更新记录：

----------------------------------------------------------------------
实验内容：
写入一些测试数据进EEPROM，再读出，使用PB口的LED做指示，观测是否与写入一致。
----------------------------------------------------------------------
硬件连接：	
将PB口的LED指示灯使能开关切换到"ON"状态。
----------------------------------------------------------------------
注意事项： 
（1）若有加载库函数，请将光盘根目录下的“库函数”下的“ICC_H”文件夹拷到D盘
（2）请详细阅读“使用必读”及相关资料。
		
----------------------------------------------------------------------
10101010101010101010101010101010101010101010101010101010101010101010*/

#include <iom16v.h>
#include "D:\ICC_H\CmmICC.H"

#define DISP_DDR   DDRB
#define DISP_PORT  PORTB

/*--------------------------------------------------------------------
函数名称：
函数功能：
注意事项：
提示说明：
输    入：
返    回：
--------------------------------------------------------------------*/
void main(void) 
{
	uint8 i;
	uint8 wrDat=0xAA;
	uint8 wrDat_[]={1,2,3,4,5,6,7,8},rdDat_[8];
	DISP_DDR=0xFF;
	EEPROMwrite(0x01,wrDat);		//写入单个数据
	DISP_PORT=EEPROMread(0x01);		//读出用指示灯验证是否正确
	delay50ms(40);				//有2S的观察时间
	EEPROMWriteBytes(1,wrDat_,8);	//写入数组						  
	EEPROMReadBytes(1,rdDat_,8);	
	for(i=0;i<7;i++)
	{
		delay50ms(40);			//有2S的观察时间
		DISP_PORT=rdDat_[i];		//读出用指示灯验证是否正确
	} 			
	while(1);
}